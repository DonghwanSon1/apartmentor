<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">
  
  <resultMap type="board" id="boardResultSet">
		<result column="BOARD_NO" property="boardNo"/>
		<result column="BOARD_TITLE" property="boardTitle"/>
		<result column="BOARD_CONTENT" property="boardContent"/>
		<result column="BOARD_WRITER" property="boardWriter"/>
		<result column="ORIGIN_NAME" property="originName"/>
		<result column="CHANGE_NAME" property="changeName"/>
		<result column="COUNT" property="count"/>
		<result column="CREATE_DATE" property="createDate"/>
		<result column="STATUS" property="status"/>
		<result column="BOARD_CATEGORY" property="boardCategory"/>
	</resultMap>
  
	<!-- 게시글 총 갯수 조회 쿼리문 -->
	<select id="selectListCount" resultType="_int">
	  	SELECT COUNT(*)
	  	  FROM BOARD
	  	 WHERE STATUS = 'Y'
	</select>
	
	<!-- 한 화면에 보여줄 게시글 리스트 조회 쿼리문 -->
	<select id="selectList" resultMap="boardResultSet">
		SELECT
				BOARD_NO,
				BOARD_TITLE,
				BOARD_WRITER,
				TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') AS "CREATE_DATE",
				BOARD_CATEGORY,
				COUNT
		 FROM
		 		BOARD
		WHERE
				STATUS = 'Y'
		ORDER
		   BY	BOARD_NO				
	</select>  
  
	<!-- 해당 게시글 조회수 증가 쿼리문 --> 
  	<update id="increaseCount" parameterType="_int">
  		UPDATE
  				BOARD
  		   SET
  		   		COUNT = COUNT + 1
  		 WHERE
  		 		BOARD_NO = #{boardNo}
  		   AND
  		   		STATUS = 'Y'		
  	</update>
	
	<!-- 해당 게시글 상세조회 쿼리문 -->  
  	<select id="selectBoard" parameterType="_int" resultMap="boardResultSet">
  		SELECT
  				BOARD_NO,
				BOARD_TITLE,
				BOARD_CONTENT,
				BOARD_WRITER,
				ORIGIN_NAME,
				CHANGE_NAME,
				COUNT,
				TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') AS "CREATE_DATE",
				BOARD_CATEGORY
		  FROM
		  		BOARD
		 WHERE				
				STATUS = 'Y'		
		   AND
		   		BOARD_NO = #{boardNo}		
  	</select>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</mapper>
